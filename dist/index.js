"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require('dotenv').config();
var routes_1 = require("./server/routes");
var queries_1 = require("./server/queries");
var express = require('express');
var sqlite3 = require('sqlite3').verbose();
var path = require('path');
var app = express();
var port = 3000;
var dbPath = process.env.DB_PATH || './db/notes.db';
var db = new sqlite3.Database(dbPath, queries_1.connectToDb);
var route = new routes_1.Route();
app.listen(port, function () { return console.log('notes server ðŸ”¥ on port: ', +port); });
app.use('/', express.static(path.join(__dirname, 'www')));
app.get('/all', route.getAllNotes(db));
app.get('/categories', route.getAllCategories(db));
app.get('/category/:category', route.getAllNotesByCategory(db));
app.get('/search/:note', route.getAllNotesByString(db));
app.get('/updatepopularity', route.updatePopularity(db));
app.post('/new', route.insertNewNote(db));
app.post('/update-note', route.updateNote(db));
app.post('/update-title', route.updateTitle(db));
